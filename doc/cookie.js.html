<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cookie.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: cookie.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>define('common:widget/ui/cookie/cookie.js', function(require, exports, module){

/**
 * @desc	cookie 操作
 * @refer	mootools/
 * @author	zhuyaqiu
 * @data	2014-03-14
 * @export
			set(key, value, expiresByDay, domain, path)
			get(key)
			remove(key)
 * @notice 
		1、cookie在同一域名的不同port共享的，需注意
		2、key命名请使用合法字符，避免出错(建议：[a-zA-Z][\w-]*)
		3、value : encodeURIComponent/decodeURIComponent
		4、服务器端在发送 cookie 时，cookie值自动进行 URL 编码; 接收时自动进行 URL 解码
**/
module.exports = {
	/** 
	 * @desc	设置 cookie，或删除 cookie
	 * @param  	{String} key      			cookie 键名
	 * @param  	{String|opt} value    		cookie 键值; 缺省时执行 remove 操作
	 * @param  	{Number|opt} expiresByDay	cookie 有效期(天); 缺省时有效期为会话期间
	 * @param  	{String|opt} domain        	cookie 域名; 缺省时为该参数(当前域名)
	 * @param  	{String|opt} path			cookie 路径; 缺省时为网站根目录("/")
	 * @return	{String|undefined}        	cookie 键值(已encodeURIComponent编码)
	 * @test	set('TGCITY', 'ddd');
	*/
	set : function(key, value, expiresByDay, domain, path) {
		domain 	= domain || "";
		path 	= path || "/";
		
		if (value === void(0) && value === "") {     	// remove
			value = void(0);
			expiresByDay = -1;
		} else {										// setter
			value = encodeURIComponent(value);
		}
		
		if (expiresByDay === void(0)) {
			document.cookie = key + "=" + value + ";path=" + path + ";domain=" + domain;
		} else {
			var date = new Date();
			date.setTime(date.getTime() + expiresByDay * 1000 * 3600 * 24);
			document.cookie = key + "=" + value +";expires=" + date.toUTCString() +";path=" + path + ";domain=" + domain;
		}
		
		return value;
	},
	
	/** 
	 * @desc	获取 cookie 值
	 * @param	{string}        key     cookie 名
	 * @return	{string|null}           cookie 值
	 * @test 	get("TGCITY")
	*/
	get : function (key) {
		var cookies = document.cookie.split(";");
		var _key = key + "=";
			
		for (var i = 0, len = cookies.length; i &lt; len; i++) {
			var pairs = cookies[i].trim();
			if (pairs.indexOf(_key) === 0) {
				return decodeURIComponent(pairs.replace(_key, ""));
			}
		}
		
		return;
	},
	
	/**
	 * @desc	删除 cookie 值
	 * @param  	{String} key      			cookie 键名
	 * @param  	{String|opt} domain    		cookie 域名，缺省时为无域名参数
	 * @param  	{String|opt} path			cookie 路径，缺省时为网站根目录("/")
	 * @test	remove("TGCITY")
	*/
	remove : function (key, domain, path) {
		this.set(key, "", -1, domain, path);
	}
};

});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="js.html">d:\git\So\base/http.js</a></li><li><a href="js_.html">d:\git\So\base/storage.js</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Sat Apr 19 2014 21:24:12 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
